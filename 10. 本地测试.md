## 本地测试

### 添加执行文件

1. （工具包）在`./lev-hub/username.tool`路径下，添加执行文件`main.py`，

   此处以测试 checkdmarc 为例，在`./lev-hub/szczecin.checkdmarc`下添加执行文件`main.py`：

```python
from lev.szczecin.nmap_python import port_os
#from lev.username.tool import assetname
if __name__ == "__main__":
    import levrt
    # import logging

    # logger = logging.getLogger("lev")
    # logger.setLevel(logging.DEBUG)
    # logger 相关的命令可以使工具在执行时，编译器命令行输出调试数据
    levrt.run(port_os("192.168.1.1/24"))
    #注意，为了 subprocess 正确的执行命令，传入编排的参数值都要符合参数定义的类型
```

2. （编排包）在`./lev-hub/username.asset`路径下，添加执行文件`main.py`，

   此处以测试 server 为例，在`./lev-hub/szczecin.server`下添加执行文件`main.py`：

```python
from lev.szczecin.server import server_post
#from lev.username.asset import assetname
if __name__ == "__main__":
    import levrt
    # import logging

    # logger = logging.getLogger("lev")
    # logger.setLevel(logging.DEBUG)
    # logger 相关的命令可以使工具在执行时，编译器命令行输出调试数据
    levrt.run(server_post(["192.168.1.1/24"]))
    #注意，为了 subprocess 正确的执行命令，传入编排的参数值都要符合参数定义的类型
```



### SSH配置

1. 进入存放 ssh 公钥的文件目录，新建 config 文件，将以下配置写入：

```bash
cd ~/.ssh
vim config

Host lev
    HostName service.lev.zone
    Port 2222
    User username	#这里换成您潮汐开源社区的用户名
```



### talentsec/lev启动

1. 登录潮汐开源社区平台，在`账户设置`—`我的设备`获取 talentsec/lev，在本地命令行执行启动命令，搭建本地数据库环境、容器调用环境及与潮汐开源社区平台系统的远程链接[^9](#talentsec/lev启用了哪些配置？)：

```bash
ssh lev agent | docker run -v /var/run/docker.sock:/docker --rm -i talentsec/lev
```

2. 待容器全部启动完毕，现在，可以在`./lev-hub/username.tool`下执行运行命令，简单地使用工具了：

```bash
pdm run python main.py
```
